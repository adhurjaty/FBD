<!DOCTYPE html>
<html>
	<head>
		<title>Statics Analysis</title>
		<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
		<!--<script src="d3.js"></script>-->
		<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js" charset="utf-8"></script>
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
		<script src="knockout-3.3.0.js"></script>
		<script src="math.min.js"></script>
		<script src="nhpup_1.1.js"></script>
		<link rel="stylesheet" href="main.css">
	</head>

	<body>
		<h1 align="center">Statics Analysis Tool</h1>
		<h4 align="center">Put forces, moments and joints on the free body diagram</h4>
		<div id="dialogBox" class="container-fluid" data-bind="style: {position: 'absolute', visibility: dialogVisibility() ? 'visible' : 'hidden', height: dialogHeight(), width: dialogWidth(), left: dialogX(), top: dialogY()}">
			<div class="row">
				<ul class="nav nav-pills" data-bind="if: orient()">
					  <li role="presentation" data-bind="attr: {class: cartesian() ? 'active' : ''}" class="active"><a href="#" data-bind="click:  changeCoords">Cartesian</a></li>
					  <li role="presentation" data-bind="attr: {class: cartesian() ? '' : 'active'}"><a href="#" data-bind="click: changeCoords">Polar</a></li>
				</ul>
				<br>
				<img data-bind="attr: {src: imgSrc(), height: imgHeight, width: imgWidth}"/>
				<div class="row" data-bind="if: moment() == true">
					<br>
					<label class="col-md-4" align="right">Magnitude: </label>
					<input class="col-md-6 col-md-offset-1" data-bind="value: orientInputs()[0]().value">
				</div>
				<div data-bind="if: moment() == false, attr: {class: orient() == false ? 'col-md-12' : 'col-md-6'}">
					<h4 align="center">Position:</h4>
					<div data-bind="foreach: posInputs">
						<div class="row">
							<label class="col-md-6" align="right" data-bind="html: label"></label>
							<input class="col-md-6" data-bind="value: value">
						</div>
					</div>
				</div>
				<div class="col-md-6" data-bind="if: orient() != false">
					<h4 align="center">Orientation:</h4>
					<div data-bind="foreach: orientInputs">
						<div class="row">
							<label class="col-md-6" align="right" data-bind="html: label"></label>
							<input class="col-md-6" data-bind="value: value">
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-md-12">
					<input type="button" value="Delete" class="btn col-md-4" onclick="deleteItem()" data-bind="visible: editObj() != null">
					<input type="button" value="" class="btn col-md-4" id="accept" data-bind="attr: {value: editObj() == null ? 'Place' : 'Edit'}" onclick="placeBtn()" >
					<input type="button" value="Cancel" class="btn col-md-4" id="cancel" onclick="cancelBtn()">
				</div>
			</div>
		</div>
		<div id="drawing" align="center"></div>
		<div class="container-fluid">
			<div class="row">
				<button class="btn btn-primary col-md-1 col-md-offset-5" onclick="calculateForces()">Calculate</button>
				<button class="btn btn-primary col-md-1" onclick="clearAssets()">Clear</button>
			</div>
			<br>
			<div class="row">
				<p class="text-center alert alert-danger col-md-8 col-md-offset-2" data-bind="visible: showError, html: errorMessage"></p>
			</div>
		</div>
		<br>
		<br>
		<div class="container-fluid">
			<div class="row">
				<div class="col-md-10 col-md-offset-1">
					<h4><strong>How it works:</strong></h4>
					<p>
						Click on the tools in the top right corner of the workspace and click within the free body diagram (FBD) to place it.
						A dialog box will pop up and you can enter the precise location of the tool. Locations are defined in Cartesian coordinates with the bottom left corner of the FBD as the origin. Coordinates must be entered as positive numbers. The initial FBD is 1x1 unit square, but if you set the X and/or Y coordinates outside of 1x1 unit, then the FBD resizes to accomodate the new parameters. Click on items to edit or delete them.
					</p>
					<p>
						The 'Clear' button clears all items from the FBD. The 'Calculate' button solves the statics problem and shows the magnitudes of reaction forces below each joint. The roller joint shows only one value upon calculation. This value is the reaction force in the direction specified on its creation. The pin joint shows 2 values: (Fx, Fy) and the cantilever joint shows 3 (Fx, Fy, Moment).
					</p>
					<br>
					<h4><strong>Forces, Moments and Joints:</strong></h4>
					<div class="row">
						<img src="img/force_img2.png" class="img-thumbnail col-md-1" alt="Force" width="40" height="40">
						<div class="col-md-11">
							<strong>Force:</strong> Apply force to the FBD at the location and in the direction specified. You can specify the force as X and Y components of it or, if you hit the 'Polar' tab, as Magnitude and angle of the force. See image in the popup menu for the force for more details.
						</div>
					</div>
					<br>
					<div class="row">
						<img src="img/moment_img.png" class="img-thumbnail col-md-1" alt="Force" width="40" height="40">
						<div class="col-md-11">
							<strong>Moment:</strong> Apply moment to the FBD. Magnitude of the moment is the only parameter. Adding multiple moments to the FBD only results in one moment being shown with the magnitude of the sums of the moments you have entered. Click on the moment icon in the middle of the FBD to find its magnitude.
						</div>
					</div>
					<br>
					<div class="row">
						<img src="img/roller_img.png" class="img-thumbnail col-md-1" alt="Force" width="40" height="40">
						<div class="col-md-11">
							<strong>Roller Joint:</strong> The roller joint only provides a reaction force in the direction that the user specifies when it is created (in the direction of the point of the triangle). The user can specify the direction of reaction force similar to the 'Force' item (Cartesian or Polar). However, the magnitude of the Cartesian direction does not matter i.e. (Fx = 1, Fy = 1) is the same as (Fx = 5, Fy = 5). If you switch to the 'Polar' tab, then only the angle need be specified. See the popup menu for the roller joint for more detail. This joint provides one constraint for the model
						</div>
					</div>
					<br>
					<div class="row">
						<img src="img/pin_img.png" class="img-thumbnail col-md-1" alt="Force" width="40" height="40">
						<div class="col-md-11">
							<strong>Pin Joint:</strong> The pin joint provides reaction forces in the X and Y directions. You only need to provide position of the pin joint. The reaction forces are shown as (Fx, Fy) after the 'Calculate' button is pressed. This joint provides two constraints for the model.
						</div>
					</div>
					<br>
					<div class="row">
						<img src="img/cantilever_img.png" class="img-thumbnail col-md-1" alt="Force" width="40" height="40">
						<div class="col-md-11">
							<strong>Cantilever Joint:</strong> The cantilever joint provides reaction forces in the X and Y directions as well as a reaction moment. The reaction forces are shown as (Fx, Fy, Moment) after the 'Calculate' button is pressed. This joint provides three constraints for the model.
						</div>
					</div>
					<br>
					<h4><strong>Constraints:</strong></h4>
					<p>
						Joints provide constraints. A constraint prevents the FBD from moving in one degree of freedom (DOF). For this 2-D model, unconstrained, there are 3 DOFs - translation in the X direction, translation in the Y direction, and rotation. A single constraint prevents one of these motions.
					</p>
					<p>
						If you click the 'Calculate' button and you have 3 constraints in the model, it should provide you with reaction forces below the joints. If you get an error message that the model is <strong>under-constrained</strong>, then add constraints until you get up to 3. If the model is <strong>over-constrained</strong>, then do the opposite.
					</p>
					<p>
						There is a special case. The model could be <strong>sigularly or redundantly constrained</strong>. This means that there are 3 constraints (i.e. 3 roller joints, a roller joint and a pin joint) however, one or more constraints is eliminating a DOF that has already been eliminated. This can happen if you have 3 roller joints that all point in the same direction, or a pin and roller at the same location.
					</p>
					<br>
					<br>
				</div>
				
			</div>
		</div>

		<script src="svg.js"></script>
		<script src="main.js"></script>
	</body>
</html>